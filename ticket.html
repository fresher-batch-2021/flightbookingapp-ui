<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="ticket.css">
    <script src="ticket.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</head>
<body>
    <header id="header"></header>
    <script src="jquery.min.js"></script>
    <script>
        $("#header").load("header.html")
    </script>
    <header>
        <div class="header">
            <a class="nav_item" href="homepage.html">
                <strong id="username"></strong>
            </a>&nbsp;
            

        </div>
    </header>
    <header>
        <div class="ticket">
            <div class = "flight_name">
            <h1 id="flight_name">Airline</h1>
            </div>
            <div class="destination">
                <div class="from">
                <label for="from">From: </label>
                <label id="from"></label>
                <label id="from_time">(00:00)</label>
                </div>
                <div class="to">
                <label for="to">To: </label>
                <label id="to"></label>
                <label id="to_time">(00:00)</label>
                </div>
            </div>
            <br><br>
            <div>
                <div class="destination_date">
                <label>Journey Date:</label>
                <label id = "depature_date"></label>
                </div>
                <br>
                <div class="destination_date">
                <label>Total Ticket Fare:</label>
                <label id = "total_ticket_fare"></label>
                </div>
            </div>
            <br>
            <div class="passenger_details">
                <label>Passenger Details:</label>              

            </div>
            <div>
                <table class="passenger_table">
                    <caption></caption>
                    <thead>
                        <tr>
                            <th id="#">S.No</th>
                            <th id="#">Name</th>
                            <th id="#">Age</th>
                            <th id="#">Gender</th>

                        </tr>
                    </thead>
                    <tbody id="task_table"></tbody>
                </table>
            </div>
        </div>
    
</body>
</html>
<script>
     let ticket_fare = JSON.parse(localStorage.getItem('ticket_fare'));     
     console.log(ticket_fare);
     document.querySelector("#total_ticket_fare").innerHTML = "â‚¹"+ticket_fare.total_fare;

    let user_details = JSON.parse(localStorage.getItem('user'));
    console.log(user_details);
    // document.querySelector("#username").innerHTML = user_details.username;

     let flight_details = JSON.parse(localStorage.getItem('booked_flight_details'));     
     console.log(flight_details);
     document.querySelector("#flight_name").innerHTML = flight_details.flight_name;
     document.querySelector("#from").innerHTML = flight_details.depature_from;
     document.querySelector("#to").innerHTML = flight_details.destination;
     document.querySelector("#from_time").innerHTML = "-"+flight_details.start_time;
     document.querySelector("#to_time").innerHTML ="-"+ flight_details.end_time;

     let depature_date = JSON.parse(localStorage.getItem('depature_date'));     
     console.log(depature_date);
     let orderedDate = new Date(depature_date).toJSON(); //.substr(0, 10);
     let date = moment(new Date(orderedDate)).format("DD-MM-YYYY");
     document.querySelector("#depature_date").innerHTML = date;

     let passengers_details = JSON.parse(localStorage.getItem('passengers'));     
     console.log(passengers_details);
     let content = "";
     let i = 0;
     for (task of passengers_details){
         i++;
        content = content + "<tr><td>"+ i +"</td><td>" + task.name + "</td><td>" + task.age + "</td><td>" + task.gender + "</td></tr>";
         
     }
     console.log(content);
     document.querySelector("#task_table").innerHTML = content;
</script>