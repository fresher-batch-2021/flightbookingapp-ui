<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>passenger details</title>
    <link rel="stylesheet" href="passenger_details.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
        integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
</head>

<body>
    <header id="header"></header>
    <script src="jquery.min.js"></script>
    <script>
        $("#header").load("header.html")
    </script>
    
    <main>
        <br>
        <table id="flight_table">
            <caption></caption>
            <tr>
                <th id="#">Airline:</th>
                <td id="flight_name"></td>
                <th id="#">From:</th>
                <td id="from"></td>
                <th id="#">To:</th>
                <td id="to"></td>
                <th id="#">Duration</th>
                <td id="duration"></td>
                <th id="#">Depature date</th>
                <td id="depature_date"></td>

            </tr>
        </table>
        <aside class="aside">
            <div class="second_heading">
                <h2>Passenger details </h2>
            </div>

            <table id="passenger_table" >
                <caption></caption>
                <thead>
                    <tr>
                        <th scope="row">S.NO</th>
                        <th scope="row">Name</th>
                        <th scope="row">Age</th>
                        <th scope="row">Gender</th>
                        <th scope="row">Remove</th>
                    </tr>
                </thead>
                <tbody id="passenger_tablebody">

                </tbody>

            </table>

        </aside>

        <div class="page_title">
            <h2>Enter Passenger details</h2>
        </div>
        <div class="login">
            <form onsubmit="passenger_validation()">
                <label>
                    <strong>Name</strong>
                </label>
                <br>
                <input type="text" name="name" id="name" placeholder="Name" autocomplete="off" autofocus required>
                <br>
                <br>
                <label>
                    <strong>Age</strong>
                </label>
                <br>
                <input type="number" name="age" id="age" min="1" max="99" placeholder="Age" autocomplete="off" required>
                <br>
                <br>
                <label><strong>Gender</strong></label>
                <select name="gender" id="gender" required>]
                    <option value="select">Select</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="others">Others</option>
                </select>
                <br>
                <br>
                <br>
                <input type="submit" name="log" id="booking" value="Add passenger">
                <br>
                <br>
            </form>
        </div>
        <div>
            <div class="passenger_fare">
                
                <p>No of Passengers:&nbsp; <span id="passenger_count"></span></p>
                
                <p>Ticket Fare:&nbsp; <span id="ticket_fare"></span></p>
                
                <p>Total fare: â‚¹<span id="total_fare"></span></p>        
              
            </div>
            <form  >
                <input type="button" value="Book Now" class="booking_button" onclick="registration_successful()">
            </form>
        </div>
        <script src="passenger_details.js"></script>
        <script>
            let user_details = JSON.parse(localStorage.getItem('user'));
            console.log(user_details);
            // document.querySelector("#username").innerHTML = user_details.username;

            let flight_details = JSON.parse(localStorage.getItem('booked_flight_details'));     
            console.log(flight_details);
            document.querySelector("#flight_name").innerHTML = flight_details.flight_name;
            document.querySelector("#from").innerHTML = flight_details.depature_from +'-'+ flight_details.start_time;
            document.querySelector("#to").innerHTML = flight_details.destination +'-'+ flight_details.end_time;
            document.querySelector("#duration").innerHTML = flight_details.duration;

            document.querySelector("#ticket_fare").innerHTML = flight_details.price;


            let depatute_date = JSON.parse(localStorage.getItem('depature_date'));
            console.log(depatute_date);
            let orderedDate = new Date(depatute_date).toJSON(); //.substr(0, 10);
            let date = moment(new Date(orderedDate)).format("DD-MM-YYYY");
            document.querySelector("#depature_date").innerHTML = date;
            
        </script>

    </main>
    </body>

</html>